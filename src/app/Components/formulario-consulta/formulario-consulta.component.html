 <h2>Mantenimiento Expedientes</h2>

 <ul class="nav nav-tabs" *ngIf="graba==true" role="tablist">
        <li class="nav-item"  >
            <a (click)="cambiatag('actual')" class="{{'nav-link '+ actual}}">  Consultas Actual</a>
        </li>
        <li class="nav-item" *ngIf="doctor.especialidad.id==1008" >
            <a  (click)="cambiatag('odontologia')" class="{{'nav-link ' + odontologia}}">  Presupuesto Odontología</a>
        </li>      
        <li class="nav-item" >
        <a  (click)="cambiatag('anteriores')" class="{{'nav-link ' + anteriores}}">  Ver Consultas Anteriores del Paciente</a>
        </li>
 </ul>
  <div [formGroup]="formGroup">
  <div class="card card-bordered style-primary">
    <div class="card-head">
      <header></header>
    </div>
    
      <div class="form-row">
          <div class="form-group col-md-4">
              <label for="record">Record #</label>
              <input type="text" class="form-control" id="record"  formControlName="record" />
          </div>
          <div class="form-group col-md-4">
              <label for="record">Fecha </label>
              <input type="date" class="form-control" id="fecha"  formControlName="fecha" />
          </div> 
          <div class="form-group col-md-4">
              <label for="file">Subir Archivos </label>
              <input type="file" class="form-control" id="files"  multiple #fileInput placeholder="Upload file..." />
              
          </div>

      </div>

      <app-docpac 
              [paciente]="paciente"
              [doctor]="doctor"
              (newItemEvent_Paciente)="actualizapaciente($event)"
              (newItemEvent_Doctor)="actualizadoctor($event)"></app-docpac>
              
        <div class="card-body style-default-bright" >
                <label >Archivos Relacionados</label>
                <app-listdoc [cod]="consulta.id" [identificador]="identificador"></app-listdoc>
        </div> 
  </div>
  <div id="consulta" *ngIf="actual=='active'">


    <div class="card-body style-default-bright" >
        <app-list-antecedente-personales
            [paciente]="paciente.paciente"
        ></app-list-antecedente-personales>
    </div>      
    <div  >         
                                
        <div class="card-body style-default-bright" >

            
                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <label >Consulta</label>
                        </div>                                          
                    </div>

                    <!-- <div class="form-row">
                        <div class="form-group col-md-3">
                            <label for="antecedentes_personales">antecedentes_personales</label>
                            <input type="text" class="form-control" id="antecedentes_personales"  formControlName="antecedentes_personales" />
                        </div>
                        <div class="form-group col-md-3"> 
                            <label for="ninez">ninez</label>
                            <input type="text" class="form-control" id="ninez"  formControlName="ninez" />         
                        </div>              
                        <div class="form-group col-md-3">
                            <label for="adolecencia">Adolecencia</label>
                            <input type="text" class="form-control" id="adolecencia" formControlName="adolecencia" />
                        </div>                            
                        <div class="form-group col-md-3">
                            <label for="adultez">adultez</label>
                            <input type="text" class="form-control" id="adultez"  formControlName="adultez" />
                        </div>
                    </div> -->

                    <!-- <div class="form-row"> 

                            <div class="form-group col-md-3"> 
                            <label for="habitos_toxicos">habitos_toxicos</label>
                            <input type="text" class="form-control" id="habitos_toxicos"  formControlName="habitos_toxicos" />         
                            </div>    
                            <div class="form-group col-sm-3">
                                <label class="switch"> cafe
                                    <input type="checkbox" id="cafe"  formControlName="cafe">
                                    <span class="slider round"></span>
                                </label>                            
                            </div>
                            <div class="form-group col-sm-3">
                                <label for="apellidos">alcohol
                                    <input type="checkbox"  id="alcohol"  formControlName="alcohol">
                                    <span class="slider round"></span>
                                </label>                            
                            </div>
                            <div class="form-group col-sm-3"> 
                                <label for="numero_identificacion">tizana
                                    <input type="checkbox" id="tizana"  formControlName="tizana">
                                    <span class="slider round"></span>
                                </label>                            
                            </div>                                                                   
                    </div>  -->
                    <div class="form-row"> 
                    
                    </div>
                    <div class="form-row"> 
                        <!-- <div class="form-group col-md-4"> 
                            <label for="antecedentes_ginocoobterico">antecedentes_ginocoobterico</label>
                            <input type="text" class="form-control" id="antecedentes_ginocoobterico"  formControlName="antecedentes_ginocoobterico" />         
                        </div>  
                        <div class="form-group col-md-4"> 
                            <label for="antecedentes_familiares">antecedentes_familiares</label>
                            <input type="text" class="form-control" id="antecedentes_familiares"  formControlName="antecedentes_familiares" />         
                        </div>      
                        <div class="form-group col-md-4"> 
                            <label for="observacion">observacion</label>
                            <input type="text" class="form-control" id="observacion"  formControlName="observacion" />         
                        </div>   -->
                        <div class="form-group col-sm-6"> 
                            <label for="historialclinico" *ngIf="odontologiax!='active'">Historial Clinico</label>
                            <label for="historialclinico" *ngIf="odontologiax=='active'">Cuestionario de Salud</label>
                            <textarea class="form-control" id="historialclinico" formControlName="historialclinico" aria-label="With textarea"></textarea>
                            <!-- <input type="text" class="form-control" id="historialclinico"  formControlName="historialclinico" />          -->
                        </div>  
                        <!-- <div class="form-group col-md-3"> 
                            <label for="ca">ca</label>
                            <input type="text" class="form-control" id="ca"  formControlName="ca" />         
                        </div>  -->
                        
                        <!-- <div class="form-row"> 
                            <div class="form-group col-md-3"> 
                                <label for="hta">hta</label>
                                <input type="text" class="form-control" id="hta"  formControlName="hta" />         
                            </div>  
                            <div class="form-group col-md-3"> 
                                <label for="tbp">tbp</label>
                                <input type="text" class="form-control" id="tbp"  formControlName="tbp" />         
                            </div>
                            <div class="form-group col-md-3"> 
                                <label for="hc">hc</label>
                                <input type="text" class="form-control" id="hc"  formControlName="hc" />         
                            </div>  
                            <div class="form-group col-md-3"> 
                                <label for="er">er</label>
                                <input type="text" class="form-control" id="er"  formControlName="er" />         
                            </div> 
                                                                                
                        </div>               -->
                        <div class="form-group col-sm-6">
                            <label for="revision_por_sistema" *ngIf="odontologiax!='active'">Revisión por Sistema</label>
                            <label for="revision_por_sistema" *ngIf="odontologiax=='active'">Alergias</label>
                            <textarea class="form-control" id="revision_por_sistema" formControlName="revision_por_sistema" aria-label="With textarea"></textarea>
                            <!-- <input type="text" class="form-control" id="revision_por_sistema"  formControlName="revision_por_sistema" /> -->
                    </div>                                              
                                                       
                    </div>
                    <div  *ngIf="odontologiax=='active'">
                        <div class="form-group col-md-6"> 
                            <label for="examen_fisico">Alerta Medica</label>
                            <textarea class="form-control" id="examen_fisico" formControlName="examen_fisico" aria-label="With textarea"></textarea>
                        </div>  
                    </div>
                    <div *ngIf="odontologiax!='active'">
                    <div class="form-row"> 
                    <div class="form-group col-md-4"> 
                        <label for="examen_fisico">Examen Fisico</label>
                              
                    </div >  
                    </div>
                    <div class="form-row"> 
                        <div class="form-group col-md-3"> 
                            <label for="ta">ta</label>
                            <input type="text" class="form-control" id="ta"  formControlName="ta" />         
                        </div>  
                        <div class="form-group col-md-3"> 
                            <label for="fc">fc</label>
                            <input type="text" class="form-control" id="fc"  formControlName="fc" />         
                        </div>
                        <div class="form-group col-md-3"> 
                            <label for="fr">fr</label>
                            <input type="text" class="form-control" id="fr"  formControlName="fr" />         
                        </div>  
                        <div class="form-group col-md-3"> 
                            <label for="fo">fo</label>
                            <input type="text" class="form-control" id="fo"  formControlName="fo" />         
                        </div>                                                                                          
                    </div>    
                    <div class="form-row"> 
                        <div class="form-group col-md-3"> 
                            <label for="cabeza">cabeza</label>
                            <input type="text" class="form-control" id="cabeza"  formControlName="cabeza" />         
                        </div>  
                        <div class="form-group col-md-3"> 
                            <label for="cuello">cuello</label>
                            <input type="text" class="form-control" id="cuello"  formControlName="cuello" />         
                        </div>
                        <div class="form-group col-md-3"> 
                            <label for="corazon">corazon</label>
                            <input type="text" class="form-control" id="corazon"  formControlName="corazon" />         
                        </div>  
                        <div class="form-group col-md-3"> 
                            <label for="purmones">pulmones</label>
                            <input type="text" class="form-control" id="purmones"  formControlName="purmones" />         
                        </div>                                                                                          
                    </div>   
                    <div class="form-row"> 
                        <div class="form-group col-md-3"> 
                            <label for="abdomen">abdomen</label>
                            <input type="text" class="form-control" id="abdomen"  formControlName="abdomen" />         
                        </div>  
                        <div class="form-group col-md-3"> 
                            <label for="extremidades">extremidades</label>
                            <input type="text" class="form-control" id="extremidades"  formControlName="extremidades" />         
                        </div>
                        <div class="form-group col-md-3"> 
                            <label for="ge">ge</label>
                            <input type="text" class="form-control" id="ge"  formControlName="ge" />         
                        </div>  
                        <div class="form-group col-md-3"> 
                            <label for="tr">tr</label>
                            <input type="text" class="form-control" id="tr"  formControlName="tr" />         
                        </div>                                                                                          
                    </div> 
                    <div class="form-row"> 
                        <div class="form-group col-md-3"> 
                            <label for="ekg">ekg</label>
                            <input type="text" class="form-control" id="ekg"  formControlName="ekg" />         
                        </div>  
                        <div class="form-group col-md-3"> 
                            <label for="analitica">analitica</label>
                            <input type="text" class="form-control" id="analitica"  formControlName="analitica" />         
                        </div>
                        <div class="form-group col-md-3"> 
                            <label for="rx_torax">rx_torax</label>
                            <input type="text" class="form-control" id="rx_torax"  formControlName="rx_torax" />         
                        </div>  
                        <div class="form-group col-md-3"> 
                            <label for="otros">otros</label>
                            <input type="text" class="form-control" id="otros"  formControlName="otros" />         
                        </div>                                                                                          
                    </div>    
                   </div>
                    <div class="form-row"> 
                        <div class="form-group col-md-6"> 
                            <label for="dx" *ngIf="odontologiax!='active'">dx</label>
                            <label for="dx" *ngIf="odontologiax=='active'">Diagnostico</label>
                            <textarea class="form-control" id="dx" formControlName="dx" aria-label="With textarea"></textarea>
                            <!-- <input type="text" class="form-control" id="dx"  formControlName="dx" />          -->
                        </div>  
                        <div class="form-group col-md-6"> 
                            
                            <label for="tx" *ngIf="odontologiax!='active'">tx</label>
                            <label for="tx" *ngIf="odontologiax=='active'">Tratamiento Realizado</label>
                            <textarea class="form-control" id="tx" formControlName="tx" aria-label="With textarea"></textarea>
                            <!-- <input type="text" class="form-control" id="tx"  formControlName="tx" />          -->
                        </div>                                                                                            
                    </div>                                                                                                                                       
        </div>                                                  
    </div>
  </div>

  
 <div id="odontologia" *ngIf="odontologia=='active'">
 
  
    <ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
          <a (click)="abrilformulario() " class="nav-link active">  Agregar</a>
        </li>
      </ul>
    <table class='table table-striped' aria-labelledby="tableLabel" width=100%>
        <thead>
          <tr>
            
            <th width=20%>Fecha</th>
            <th width=40%>Procedimiento</th>            
            <th width=10%>Valor</th>
            <th width=10%>Opciones</th> 
          </tr>
        </thead>
      </table>
      <div id="div1" >
      <table class='table table-striped' aria-labelledby="tableLabel"  width=100%>      
        <tbody>
            <tr *ngFor="let pres of presu;let i = index" >

                <td width=10% id="{{'fecha'+i}}"> <input type="date" class="form-control" id="fecha"  (change)="valueChange($event,'fecha',pres)" [value]="pres.fecha | date:'yyyy-MM-dd'" >  </td>
                <td width=40% id="{{'procedimiento'+i}}"> 
                    <!-- <input type="text" class="form-control"  id="procedimiento" (change)="valueChange($event,'procedimiento',pres)" [value]="pres.procedimiento " >   -->
                    <select class="form-control"  id="procedimiento"  (change)="valueChange($event,'procedimiento',pres)">
                        <option *ngFor="let p of procedimientosdts" [value]="p.id"> {{p.descripcion}}-{{p.especialidad}} </option>          
                    </select>
                </td>
                <td width=20% id="{{'valor'+i}}"><input type="text" style="text-align:right;" class="form-control"  id="valor" (change)="valueChange($event,'valor',pres)" [value]="pres.valor | number:'1.2-2'"  aria-label="Readonly field">  </td>            
                <td width=10% > <button class="btn btn" (click)="eliminar(pres)" >Eliminar</button> </td>

            </tr>
        </tbody>
      </table>
      </div>
      <table class='table table-striped' aria-labelledby="tableLabel" width=100%>
        <thead>
          <tr>
            
            <th width=10%></th>
            <th width=40%>Total</th>            
            <th width=20%><input type="text" class="form-control" style="text-align:right;"  id="monto"  [value]="monto | number:'1.2-2'"  readonly></th>
            <th width=10%></th> 
          </tr>
        </thead>
      </table>  
           
 </div> 

<div id="canterior" *ngIf="anteriores=='active'">
    <app-lista-expediente-paciente 
        [pacienteid]="consulta.pacienteid"
        [nombrepaciente]="paciente.persona.nombres+' '+paciente.persona.apellidos"
    ></app-lista-expediente-paciente>
</div>
</div>
<div class="text-center pt-1 mb-5 pb-1">
    <div class="d-grid gap-2">
     <button class="btn btn-success btn-block mb-3" [disabled]="!formGroup.valid" (click)="grabar()"> Grabar</button>
     <button class="btn btn-secondary btn-block" type="button" (click)="cancelar()"  >Cancelar</button>
    </div>
  </div>

